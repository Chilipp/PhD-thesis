%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Masters/Doctoral Thesis
% LaTeX Template
% Version 2.5 (27/8/17)
%
% This template was downloaded from:
% http://www.LaTeXTemplates.com
%
% Version 2.x major modifications by:
% Vel (vel@latextemplates.com)
%
% This template is based on a template by:
% Steve Gunn (http://users.ecs.soton.ac.uk/srg/softwaretools/document/templates/)
% Sunil Patel (http://www.sunilpatel.co.uk/thesis-template/)
%
% Template license:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[
11pt, % The default document font size, options: 10pt, 11pt, 12pt
%oneside, % Two side (alternating margins) for binding by default, uncomment to switch to one side
english, % ngerman for German
singlespacing, % Single line spacing, alternatives: onehalfspacing or doublespacing
%draft, % Uncomment to enable draft mode (no pictures, no links, overfull hboxes indicated)
%nolistspacing, % If the document is onehalfspacing or doublespacing, uncomment this to set spacing in lists to single
%liststotoc, % Uncomment to add the list of figures/tables/etc to the table of contents
%toctotoc, % Uncomment to add the main table of contents to the table of contents
%parskip, % Uncomment to add space between paragraphs
%nohyperref, % Uncomment to not load the hyperref package
headsepline, % Uncomment to get a line under the header
%chapterinoneline, % Uncomment to place the chapter title next to the number on one line
%consistentlayout, % Uncomment to change the layout of the declaration, abstract and acknowledgements pages to match the default layout,
]{MastersDoctoralThesis} % The class file specifying the document structure

\usepackage[utf8]{inputenc} % Required for inputting international characters
\usepackage[T1]{fontenc} % Output font encoding for international characters
\usepackage{textcomp}

\usepackage{mathpazo} % Use the Palatino font by default

\usepackage[backend=biber,style=authoryear-icomp,sorting=nyt,maxbibnames=100,bibencoding=utf8,natbib,uniquelist=false,maxcitenames=2]{biblatex} % Use the bibtex backend with the authoryear citation style (which resembles APA)

\addbibresource{mybib.bib} % The filename of the bibliography

\usepackage[autostyle=true]{csquotes} % Required to generate language-dependent quotes in the bibliography

%----------------------------------------------------------------------------------------
%	MARGIN SETTINGS
%----------------------------------------------------------------------------------------

\geometry{
	paper=a4paper, % Change to letterpaper for US letter
	inner=2.5cm, % Inner margin
	outer=3.8cm, % Outer margin
	bindingoffset=.5cm, % Binding offset
	top=1.5cm, % Top margin
	bottom=1.5cm, % Bottom margin
	marginparwidth=2.5cm,
	%showframe, % Uncomment to show how the type block is set on the page
}

%----------------------------------------------------------------------------------------
%	THESIS INFORMATION
%----------------------------------------------------------------------------------------

\thesistitle{Software and Numerical Tools for Paleoclimate Analysis} % Your thesis title, this is used in the title and abstract, print it elsewhere with \ttitle
\supervisor{Dr. Basil A. S. Davis} % Your supervisor's name, this is used in the title page, print it elsewhere with \supname
\examiner{Prof. Dr. Grégoire Mariéthoz, Dr. Basil A. S. Davis, Prof. Dr. John Tipton, Prof. Dr. Christoph Raible} % Your examiner's name, this is not currently used anywhere in the template, print it elsewhere with \examname
\degree{Doctor of Science} % Your degree name, this is used in the title page and abstract, print it elsewhere with \degreename
\author{Philipp S. \textsc{Sommer}} % Your name, this is used in the title page and abstract, print it elsewhere with \authorname
\addresses{Université de Lausanne, Bâtiment Géopolis, 1015 Lausanne} % Your address, this is not currently used anywhere in the template, print it elsewhere with \addressname

\subject{Climate Science} % Your subject area, this is not currently used anywhere in the template, print it elsewhere with \subjectname
\keywords{} % Keywords for your thesis, this is not currently used anywhere in the template, print it elsewhere with \keywordnames
\university{\href{https://www.unil.ch}{Université de Lausanne}} % Your university's name and URL, this is used in the title page and abstract, print it elsewhere with \univname
\department{\href{https://www.unil.ch/idyst/}{Institute of Earth Surface Dynamics (IDYST)}} % Your department's name and URL, this is used in the title page and abstract, print it elsewhere with \deptname
\group{\href{https://wp.unil.ch/davisgroup/}{The Davis Group}} % Your research group's name and URL, this is used in the title page, print it elsewhere with \groupname
\faculty{\href{https://www.unil.ch/gse}{Faculty of Geosciences and Environment (FGSE)}} % Your faculty's name and URL, this is used in the title page and abstract, print it elsewhere with \facname

\AtBeginDocument{
\hypersetup{pdftitle=\ttitle} % Set the PDF's title to your title
\hypersetup{pdfauthor=\authorname} % Set the PDF's author to your name
\hypersetup{pdfkeywords=\keywordnames} % Set the PDF's keywords to your keywords
\hypersetup{linkcolor=.}
}

%----------------------------------------------------------------------------------------
%	CUSTOM LATEX PACKAGES
%----------------------------------------------------------------------------------------
\usepackage{tikz}
\usepackage{appendix}
\usepackage{amsmath}
\usepackage{algorithmic}
\usepackage{algorithm}
\usepackage{hyperref}
\usepackage{fancyvrb}
\usepackage[acronym,toc,nomain,savenumberlist,counter=chapter]{glossaries}
\usepackage[colorinlistoftodos,textsize=tiny]{todonotes}
\usepackage{titlesec, titletoc}  % necessary for putting bars and labels under the part in toc
\usepackage{multirow}
\usepackage{longtable}
\usepackage{afterpage}

\input{pygments-header.tex}

%----------------------------------------------------------------------------------------
%	CUSTOM LATEX COMMANDS
%----------------------------------------------------------------------------------------

\newcommand\Chapter[2]{
	\chapter[#1: {\itshape#2}]{#1\\[2ex]\Large\itshape#2}
}
\newcommand\tophline{\hline\noalign{\vspace{1mm}}}
\newcommand\middlehline{\noalign{\vspace{1mm}}\hline\noalign{\vspace{1mm}}}
\newcommand\bottomhline{\noalign{\vspace{1mm}}\hline}
\newcommand\hhline{\noalign{\vspace{1mm}}\hline\noalign{\vspace{1mm}}}
\DeclareRobustCommand*\unit[1]%
{\ensuremath{%
		{\thinmuskip3mu\relax
			\def\mu{\text{\textmu}}\def~{\,}%
			\ifx\f@series\testbx\mathbf{#1}\else\mathrm{#1}\fi}}}

\newcounter{addrefcounter}

\newcommand{\addref}[1][]{\stepcounter{addrefcounter}\todo[color=red!40]{\theaddrefcounter: Add reference. #1}}
\newcommand{\rewrite}[1]{\todo[color=green!40, size=\normalsize, inline]{#1}}

\newcommand{\bibforkey}[1]{%
	\defbibcheck{key#1}{
		\iffieldequalstr{entrykey}{#1}
		{}
		{\skipentry}}%
	\printbibliography[heading=none,check=key#1]%
}

% put bars and labels under the part in toc
\titlelabel{\thetitle\quad}

\titlecontents{part}%
[0pt]{\bfseries\large\protect\addvspace{4ex}}
{}{\partname~}
{\hfill\contentspage}%
[\addvspace{0.3ex}\titlerule\addvspace{1.5ex}]%

\makeatletter
\def\convertto#1#2{\strip@pt\dimexpr #2*65536/\number\dimexpr 1#1}
\makeatother

%----------------------------------------------------------------------------------------
%	ABBREVIATIONS
%----------------------------------------------------------------------------------------

\makeglossaries

\newacronym{esm}{ESM}{Earth System Model}
\newacronym{gcm}{GCM}{General Circulation Model}
\newacronym{nao}{NAO}{North Atlantic Oscillation}
\newacronym{pmip}{PMIP}{Paleoclimate Modelling Intercomparison Project}
\newacronym{cmip}{CMIP}{Coupled Model Intercomparison Project}
\newacronym{ipcc}{IPCC}{Intergovernmental Panel on Climate Change}
\newacronym{epd}{EPD}{European Pollen Database}
\newacronym{napd}{NAPD}{North American Pollen Database}
\newacronym{empd}{EMPD}{Eurasian Modern Pollen Database}
\newacronym{noaa}{NOAA}{National Oceanic and Atmospheric Administration}
\newacronym{ncdc}{NCDC}{National Climatic Data Center}
\newacronym{mpi-esm}{MPI-ESM-LR}{Max-Planck-Insitute Earth System Model at low resolution}
\newacronym{htm}{HTM}{Holocene Thermal Maximum}
\newacronym{lig}{LIG}{Last Interglacial}
\newacronym{lgm}{LGM}{Last Glacial Maximum}
\newacronym{cdo}{CDO}{Climate Data Operator}
\newacronym{nco}{NCO}{netCDF Operator}
\newacronym{foss}{FOSS}{Free and Open-Source Software}
\newacronym{ci}{CI}{Continuous Integration}
\newacronym{api}{API}{Application programming interface}
\newacronym{gui}{GUI}{graphical user interface}
\newacronym[longplural={Earth System Models of Intermediate Complexity}]{emic}{EMIC}{Earth System Model of Intermediate Complexity}
\newacronym{jja}{JJA}{summer (June, July and August)}
\newacronym{djf}{DJF}{winter (December, January and February)}
\newacronym{mat}{MAT}{modern analogue technique}
\newacronym{gam}{GAM}{Generalized Additive Model}
\newacronym{mcmc}{MCMC}{Markov chain Monte Carlo}
\newacronym{lapd}{LAPD}{Latin American Pollen Database}
\newacronym{apd}{APD}{African Pollen Database}

%\includeonly{Chapters/psyplot}

\begin{document}

\frontmatter % Use roman page numbering style (i, ii, iii, iv...) for the pre-content pages

\pagestyle{plain} % Default to the plain heading style until the thesis style is called for the body content

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\begin{titlepage}
\begin{center}

\vspace*{.06\textheight}
{\scshape\LARGE \univname\par}\vspace{1.5cm} % University name
\textsc{\Large Doctoral Thesis}\\[0.5cm] % Thesis type

\HRule \\[0.4cm] % Horizontal line
{\huge \bfseries \ttitle\par}\vspace{0.4cm} % Thesis title
\HRule \\[1.5cm] % Horizontal line

\begin{minipage}[t]{0.4\textwidth}
\begin{flushleft} \large
\emph{Author:}\\
\href{http://www.philipp-s-sommer.de}{\authorname} % Author name - remove the \href bracket to remove the link
\end{flushleft}
\end{minipage}
\begin{minipage}[t]{0.4\textwidth}
\begin{flushright} \large
\emph{Supervisor:} \\
\href{https://wp.unil.ch/davisgroup/basil-davis}{\supname} % Supervisor name - remove the \href bracket to remove the link
\end{flushright}
\end{minipage}\\[3cm]

\vfill

\large \textit{A thesis submitted in fulfillment of the requirements\\ for the degree of \degreename}\\[0.3cm] % University requirement text
\textit{in the}\\[0.4cm]
\groupname\\\deptname\\[2cm] % Research group name and department name

\vfill

{\large \today}\\[4cm] % Date
%\includegraphics{Logo} % University/department logo - uncomment to place it

\vfill
\end{center}
\end{titlepage}

\include{frontmatter}

%----------------------------------------------------------------------------------------
%	LIST OF CONTENTS/FIGURES/TABLES PAGES
%----------------------------------------------------------------------------------------

\tableofcontents % Prints the main table of contents

%----------------------------------------------------------------------------------------
%	THESIS CONTENT - CHAPTERS
%----------------------------------------------------------------------------------------

\mainmatter % Begin numeric (1,2,3...) page numbering

\pagestyle{thesis} % Return the page headers back to the "thesis" style

% Include the chapters of the thesis as separate files from the Chapters folder
% Uncomment the lines as you write the chapters

\include{Chapters/introduction}

\part{New Software Tools for Paleoclimate Analysis}  \label{part:software}

\include{Chapters/psyplot}
\include{Chapters/straditize}
\include{Chapters/empd}

\part{Numerical Analysis of Paleoclimate Data}  \label{part:numerics}

\include{Chapters/gwgen}
\include{Chapters/gridding}

\include{Chapters/conclusions}

%----------------------------------------------------------------------------------------
%	THESIS CONTENT - APPENDICES
%----------------------------------------------------------------------------------------

\cleardoublepage

\appendix % Cue to tell LaTeX that the following "chapters" are Appendices
\hypertarget{appendix}{\appendixpage}
\addappheadtotoc

%----------------------------------------------------------------------------------------
%	TODO notes
%----------------------------------------------------------------------------------------

\todototoc
\listoftodos

%\addcontentsline{toc}{chapter}{\listfigurename}
%\listoffigures % Prints the list of figures
%
%\addcontentsline{toc}{chapter}{\listtablename}
%\listoftables % Prints the list of tables

%----------------------------------------------------------------------------------------
%	ABBREVIATIONS
%----------------------------------------------------------------------------------------

	\printacronyms[title={List of Abbreviations}]

%----------------------------------------------------------------------------------------
%	SYMBOLS
%----------------------------------------------------------------------------------------

%\begin{symbols}{lll} % Include a list of Symbols (a three column table)
%
%	$a$ & distance & \si{\meter} \\
%	$P$ & power & \si{\watt} (\si{\joule\per\second}) \\
%	%Symbol & Name & Unit \\
%
%	\addlinespace % Gap to separate the Roman symbols from the Greek
%
%	$\omega$ & angular frequency & \si{\radian} \\
%
%\end{symbols}

% Include the appendices of the thesis as separate files from the Appendices folder
% Uncomment the lines as you write the Appendices

\include{Appendices/iucm}
\include{Appendices/publications}
\include{Appendices/software}

%----------------------------------------------------------------------------------------

\end{document}
